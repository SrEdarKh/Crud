{% extends 'base.html' %}
{% block content %}

<div class="container mt-4">
  {% if user.is_authenticated %}
    <h1 class="text-center mb-4">👋 Registro de usuario 🔥</h1>

    {% if records %}
      <table class="table table-striped table-hover table-bordered">
        <thead class="table-dark">
          <tr>
            <th scope="col">Name</th>
            <th scope="col">Email</th>
            <th scope="col">Phone</th>
            <th scope="col">Address</th>
            <th scope="col">City</th>
            <th scope="col">State</th>
            <th scope="col">Zipcode</th>
            <th scope="col">Created At</th>
            <th scope="col">ID</th>
          </tr>
        </thead>
        <tbody>
          {% for record in records %}
            <tr>
              <td>{{ record.first_name }} {{ record.last_name }}</td>
              <td>{{ record.email }}</td>
              <td>{{ record.phone }}</td>
              <td>{{ record.address }}</td>
              <td>{{ record.city }}</td>
              <td>{{ record.state }}</td>
              <td>{{ record.zipcode }}</td>
              <td>{{ record.created_at }}</td>
              <td>{{ record.id }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
<!-- Paginación -->
    <!-- Paginación estilizada y responsive con Bootstrap -->
<div class="container mt-5">
  <div class="row">
    <div class="col text-center">
      <nav aria-label="Paginación de registros">
        <ul class="pagination pagination-lg justify-content-center flex-wrap">


          {% if records.has_previous %}
            <li class="page-item">
              <a class="page-link bg-dark text-white" href="?page=1" title="Primera página">&laquo;</a>
            </li>
            <li class="page-item">
              <a class="page-link bg-dark text-white" href="?page={{ records.previous_page_number }}" title="Anterior">&lsaquo;</a>
            </li>
          {% else %}
            <li class="page-item disabled">
              <span class="page-link bg-secondary text-white">&laquo;</span>
            </li>
            <li class="page-item disabled">
              <span class="page-link bg-secondary text-white">&lsaquo;</span>
            </li>
          {% endif %}


          {% for num in records.paginator.page_range %}
            {% if num >= records.number|add:'-2' and num <= records.number|add:'2' %}
              {% if records.number == num %}
                <li class="page-item active">
                  <span class="page-link">{{ num }}</span>
                </li>
              {% else %}
                <li class="page-item">
                  <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                </li>
              {% endif %}
            {% endif %}
          {% endfor %}


          {% if records.has_next %}
            <li class="page-item">
              <a class="page-link bg-dark text-white" href="?page={{ records.next_page_number }}" title="Siguiente">&rsaquo;</a>
            </li>
            <li class="page-item">
              <a class="page-link bg-dark text-white" href="?page={{ records.paginator.num_pages }}" title="Última página">&raquo;</a>
            </li>
          {% else %}
            <li class="page-item disabled">
              <span class="page-link bg-secondary text-white">&rsaquo;</span>
            </li>
            <li class="page-item disabled">
              <span class="page-link bg-secondary text-white">&raquo;</span>
            </li>
          {% endif %}


        </ul>
        <p class="text-muted mt-2">Página {{ records.number }} de {{ records.paginator.num_pages }}</p>
      </nav>
    </div>
  </div>
</div>

    {% else %}
      <p class="text-center">No hay registros aún.</p>
    {% endif %}

  {% else %}
    <p class="text-center">Por favor inicia sesión para ver los registros.</p>
  {% endif %}
</div>

{% endblock %}
